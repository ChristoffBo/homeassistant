{
  "id": "mqtt_service",
  "name": "MQTT Broker",
  "description": "Verifies that the MQTT broker (Mosquitto, EMQX, or other) is active and restarts it if not.",
  "check_cmd": "if command -v systemctl >/dev/null 2>&1; then if systemctl is-active mosquitto >/dev/null 2>&1 || systemctl is-active emqx >/dev/null 2>&1 || systemctl is-active mqtt >/dev/null 2>&1; then echo ok; else echo fix; fi; else echo ok; fi",
  "expected_output": "ok",
  "fix_cmd": "if command -v systemctl >/dev/null 2>&1; then systemctl restart mosquitto >/dev/null 2>&1 || systemctl restart emqx >/dev/null 2>&1 || systemctl restart mqtt >/dev/null 2>&1 || echo 'No MQTT broker found'; fi",
  "verify_cmd": "if systemctl is-active mosquitto >/dev/null 2>&1 || systemctl is-active emqx >/dev/null 2>&1 || systemctl is-active mqtt >/dev/null 2>&1; then echo ok; else echo fail; fi",
  "retry_count": 1,
  "retry_delay": 60,
  "ttl_seconds": 3600
}