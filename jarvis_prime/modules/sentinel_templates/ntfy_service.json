{
  "id": "ntfy_service",
  "name": "ntfy Server",
  "description": "Ensures the ntfy notification API is responding on port 2580.",
  "check_cmd": "if curl -fs --max-time 3 http://localhost:2580/health 2>/dev/null | grep -q 'ok'; then echo ok; else echo fix; fi",
  "expected_output": "ok",
  "fix_cmd": "if command -v docker >/dev/null 2>&1; then docker start ntfy 2>/dev/null || docker restart ntfy 2>/dev/null || true; elif command -v systemctl >/dev/null 2>&1; then systemctl restart ntfy || true; fi",
  "verify_cmd": "sleep 3; if curl -fs --max-time 3 http://localhost:2580/health 2>/dev/null | grep -q 'ok'; then echo ok; else echo fail; fi",
  "retry_count": 1,
  "retry_delay": 60,
  "ttl_seconds": 3600
}