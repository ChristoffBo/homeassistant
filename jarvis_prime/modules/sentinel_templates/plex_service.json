{
  "id": "plex_service",
  "name": "Plex Media Server",
  "description": "Checks Plex container or native service health (Docker or systemd).",
  "check_cmd": "if command -v docker >/dev/null && docker ps --format '{{.Names}}' | grep -iq 'plex'; then echo active; elif command -v systemctl >/dev/null && systemctl is-active plexmediaserver 2>/dev/null | grep -iq '^active$'; then echo active; else echo inactive; fi",
  "expected_output": "active",
  "fix_cmd": "if command -v docker >/dev/null && docker ps -a --format '{{.Names}}' | grep -iq 'plex'; then docker start $(docker ps -a --format '{{.Names}}' | grep -im1 'plex') || true; elif command -v systemctl >/dev/null; then systemctl restart plexmediaserver || true; fi",
  "verify_cmd": "curl -fs http://localhost:32400/identity 2>/dev/null | grep -q 'PlexMediaServer' && echo active || echo verified",
  "retry_count": 1,
  "retry_delay": 60,
  "ttl_seconds": 3600
}