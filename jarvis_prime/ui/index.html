<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Jarvis Prime</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <span class="dot">ðŸ§ </span>
      <span>Jarvis Prime</span>
    </div>
    <nav class="tabs">
      <button class="tablink active" data-tab="tab-inbox">Inbox</button>
      <button class="tablink" data-tab="tab-aegis-hosts">Aegis â€¢ Hosts</button>
      <button class="tablink" data-tab="tab-aegis-pb">Aegis â€¢ Playbooks</button>
      <button class="tablink" data-tab="tab-aegis-sch">Aegis â€¢ Schedules</button>
      <button class="tablink" data-tab="tab-aegis-runs">Aegis â€¢ Runs</button>
      <button class="tablink" data-tab="tab-editor">Playbook Editor</button>
    </nav>
  </header>

  <!-- ============== INBOX ============== -->
  <section id="tab-inbox" class="tab active">
    <div class="grid grid-2">
      <div class="card">
        <div class="card-head">
          <div class="title">Messages</div>
          <div class="actions">
            <label class="chk">
              <input id="pv-follow" type="checkbox" checked>
              <span>Follow newest</span>
            </label>
            <button id="del-all" class="btn danger">Delete All</button>
            <label class="chk">
              <input id="keep-arch" type="checkbox">
              <span>Keep archived</span>
            </label>
          </div>
        </div>
        <div class="table-wrap">
          <table class="table">
            <thead>
              <tr><th>Time</th><th>Source</th><th>Title</th><th>Actions</th></tr>
            </thead>
            <tbody id="msg-body">
              <tr><td colspan="4">Loadingâ€¦</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="card">
        <div class="card-head">
          <div class="title" id="pv-title">No message selected</div>
          <div class="meta" id="pv-meta">â€“</div>
        </div>
        <div class="pv-stats">
          <div class="pill"><div class="n" id="msg-today">0</div><div class="l">Today</div></div>
          <div class="pill"><div class="n" id="msg-arch">0</div><div class="l">Archived</div></div>
          <div class="pill"><div class="n" id="msg-err">0</div><div class="l">Errors</div></div>
        </div>
        <pre id="pv-body" class="pv-body"><span class="muted">Click a message to see its contents here.</span></pre>
      </div>
    </div>
  </section>

  <!-- ============== AEGIS â€¢ HOSTS ============== -->
  <section id="tab-aegis-hosts" class="tab">
    <div class="card">
      <div class="card-head">
        <div class="title">Inventory (inventory.ini)</div>
        <div class="actions">
          <button id="ag-host-refresh" class="btn">Refresh</button>
          <button id="ag-host-add" class="btn">Add Host</button>
          <button id="ag-host-save" class="btn primary">Save</button>
        </div>
      </div>
      <div class="table-wrap">
        <table class="table">
          <thead>
            <tr><th>Name</th><th>Host/IP</th><th>User</th><th>Actions</th></tr>
          </thead>
          <tbody id="ag-hosts">
            <tr><td colspan="4">No hosts (use Add Host or Refresh)</td></tr>
          </tbody>
        </table>
      </div>
      <div class="hint">Hosts are written to <code>/share/jarvis_prime/aegisops/inventory.ini</code>.</div>
    </div>
  </section>

  <!-- ============== AEGIS â€¢ PLAYBOOKS ============== -->
  <section id="tab-aegis-pb" class="tab">
    <div class="card">
      <div class="card-head">
        <div class="title">Playbooks</div>
        <div class="actions">
          <button id="ag-pb-refresh" class="btn">Refresh</button>
          <button id="ag-pb-run" class="btn">Run Once (all hosts)</button>
        </div>
      </div>
      <div class="form-row">
        <label>Playbook</label>
        <select id="ag-pb-select">
          <option value="">No playbooks found</option>
        </select>
      </div>
    </div>
  </section>

  <!-- ============== AEGIS â€¢ SCHEDULES ============== -->
  <section id="tab-aegis-sch" class="tab">
    <div class="grid grid-2">
      <div class="card">
        <div class="card-head">
          <div class="title">New / Edit Schedule</div>
          <div class="actions">
            <button id="ag-meta-refresh" class="btn">Re-scan Hosts & Playbooks</button>
          </div>
        </div>

        <div class="form-2col">
          <div class="form-row">
            <label>Schedule ID</label>
            <input id="ag-sch-id" value="uptime-5m">
          </div>
          <div class="form-row">
            <label>Playbook</label>
            <select id="ag-sch-playbook-select">
              <option value="">No playbooks found</option>
            </select>
          </div>

          <div class="form-row">
            <label>Interval</label>
            <select id="ag-sch-every">
              <option>5m</option><option>15m</option><option>1h</option>
              <option>6h</option><option>24h</option>
            </select>
          </div>
          <div class="form-row">
            <label>Forks</label>
            <input id="ag-sch-forks" type="number" min="1" value="1">
          </div>

          <div class="form-row">
            <label>Servers (multi)</label>
            <select id="ag-sch-servers-select" multiple size="6">
              <option>No hosts</option>
            </select>
          </div>
          <div class="form-row">
            <label>&nbsp;</label>
            <div class="stack">
              <label class="chk"><input id="ag-notify-success" type="checkbox"><span>Notify on success</span></label>
              <label class="chk"><input id="ag-notify-fail"    type="checkbox" checked><span>Notify on fail</span></label>
              <label class="chk"><input id="ag-notify-change"  type="checkbox" checked><span>Only on state change</span></label>
            </div>
          </div>

          <div class="form-row">
            <label>Cooldown (min)</label>
            <input id="ag-notify-cooldown" type="number" min="0" value="30">
          </div>
          <div class="form-row">
            <label>Quiet Hours</label>
            <input id="ag-notify-quiet" value="22:00-06:00">
          </div>

          <div class="form-row">
            <label>Target Key</label>
            <input id="ag-notify-key" value="uptime">
          </div>
          <div class="form-row">
            <label>&nbsp;</label>
            <button id="ag-add" class="btn primary">Save Schedule</button>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-head"><div class="title">Schedules</div></div>
        <div class="table-wrap">
          <table class="table">
            <thead>
              <tr><th>ID</th><th>Playbook</th><th>Servers</th><th>Every</th><th>Actions</th></tr>
            </thead>
            <tbody id="ag-table">
              <tr><td colspan="5">No schedules</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <!-- ============== AEGIS â€¢ RUNS ============== -->
  <section id="tab-aegis-runs" class="tab">
    <div class="card">
      <div class="card-head">
        <div class="title">Runs & Logs</div>
        <div class="actions"><button id="ag-refresh" class="btn">Refresh</button></div>
      </div>
      <div class="table-wrap">
        <table class="table">
          <thead>
            <tr><th>Time</th><th>Playbook</th><th>Status</th><th>OK</th><th>Changed</th><th>Fail</th><th>Unreachable</th></tr>
          </thead>
          <tbody id="ag-runs">
            <tr><td colspan="7">No runs</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- ============== PLAYBOOK EDITOR ============== -->
  <section id="tab-editor" class="tab">
    <div class="card">
      <div class="card-head">
        <div class="title">Playbook Editor</div>
        <div class="actions">
          <button id="pb-load" class="btn">Load</button>
          <button id="pb-save" class="btn primary">Save</button>
          <button id="pb-delete" class="btn danger">Delete</button>
        </div>
      </div>

      <div class="form-2col">
        <div class="form-row">
          <label>Playbook</label>
          <select id="pb-select"><option value="">No playbooks found</option></select>
        </div>
        <div class="form-row">
          <label>New filename</label>
          <input id="pb-new-name" placeholder="e.g. my_playbook.yml">
        </div>
      </div>

      <textarea id="pb-editor" spellcheck="false" class="editor" placeholder="# YAML content here"></textarea>
      <div class="hint">Files are saved under <code>/share/jarvis_prime/aegisops/playbooks/</code>.</div>
    </div>
  </section>

  <div id="toast" class="toasts"></div>
  <script src="app.js"></script>
</body>
</html>
