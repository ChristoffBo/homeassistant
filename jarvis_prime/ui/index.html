<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jarvis Prime â€¢ Inbox & AegisOps</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <span class="logo">ðŸ§ </span>
      <h1>Jarvis Prime</h1>
    </div>
    <nav class="tabbar">
      <button class="tablink active" data-tab="inbox">Inbox</button>
      <button class="tablink" data-tab="aeg-hosts">Aegis â€¢ Hosts</button>
      <button class="tablink" data-tab="aeg-playbooks">Aegis â€¢ Playbooks</button>
      <button class="tablink" data-tab="aeg-schedules">Aegis â€¢ Schedules</button>
      <button class="tablink" data-tab="aeg-runs">Aegis â€¢ Runs</button>
      <button class="tablink" data-tab="pb-editor">Playbook Editor</button>
    </nav>
  </header>

  <main class="container">

    <!-- ============== INBOX ============== -->
    <section id="inbox" class="tab active">
      <div class="grid grid-2">
        <div class="card">
          <div class="card-header">
            <h3>Messages</h3>
            <div class="right controls">
              <label class="inline"><input type="checkbox" id="pv-follow" checked /> Follow newest</label>
              <button id="del-all" class="btn danger">Delete All</button>
              <label class="inline"><input type="checkbox" id="keep-arch" /> Keep archived</label>
            </div>
          </div>
          <table class="table">
            <thead>
              <tr>
                <th>Time</th>
                <th>Source</th>
                <th>Title</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="msg-body"></tbody>
          </table>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 id="pv-title">No message selected</h3>
            <div id="pv-meta" class="muted">â€“</div>
          </div>
          <div id="pv-body" class="pre"></div>
          <div class="stats-row">
            <div class="stat"><div class="stat-val" id="msg-today">0</div><div class="stat-lbl">Today</div></div>
            <div class="stat"><div class="stat-val" id="msg-arch">0</div><div class="stat-lbl">Archived</div></div>
            <div class="stat"><div class="stat-val" id="msg-err">0</div><div class="stat-lbl">Errors</div></div>
          </div>
        </div>
      </div>
    </section>

    <!-- ============== AEGIS: HOSTS ============== -->
    <section id="aeg-hosts" class="tab">
      <div class="card">
        <div class="card-header">
          <h3>Inventory (inventory.ini)</h3>
          <div class="right controls">
            <button id="ag-host-refresh" class="btn">Refresh</button>
            <button id="ag-host-add" class="btn">Add Host</button>
            <button id="ag-host-save" class="btn primary">Save</button>
          </div>
        </div>
        <table class="table">
          <thead><tr><th>Name</th><th>Host/IP</th><th>User</th><th></th></tr></thead>
          <tbody id="ag-hosts"></tbody>
        </table>
        <p class="muted">Hosts are written to <code>/share/jarvis_prime/aegisops/inventory.ini</code>.</p>
      </div>
    </section>

    <!-- ============== AEGIS: PLAYBOOKS ============== -->
    <section id="aeg-playbooks" class="tab">
      <div class="card">
        <div class="card-header">
          <h3>Run Playbook</h3>
          <div class="right controls">
            <button id="ag-pb-refresh" class="btn">Refresh List</button>
            <button id="ag-pb-run" class="btn primary">Run Now</button>
          </div>
        </div>
        <div class="form">
          <label>Playbook
            <select id="ag-pb-select"></select>
          </label>
          <p class="muted">Playbooks are read from <code>/share/jarvis_prime/aegisops/playbooks</code>.</p>
        </div>
      </div>
    </section>

    <!-- ============== AEGIS: SCHEDULES ============== -->
    <section id="aeg-schedules" class="tab">
      <div class="grid grid-2">
        <div class="card">
          <div class="card-header">
            <h3>New / Edit Schedule</h3>
            <div class="right controls">
              <button id="ag-meta-refresh" class="btn">Re-scan Hosts & Playbooks</button>
            </div>
          </div>
          <div class="form-grid">
            <label>Schedule ID
              <input id="ag-sch-id" placeholder="uptime-5m" />
            </label>

            <label>Playbook
              <select id="ag-sch-playbook-select"></select>
            </label>

            <label>Servers (multi)
              <select id="ag-sch-servers-select" multiple></select>
            </label>

            <label>Interval
              <select id="ag-sch-every">
                <option value="5m">5m</option>
                <option value="15m">15m</option>
                <option value="1h">1h</option>
                <option value="6h">6h</option>
                <option value="24h">24h</option>
              </select>
            </label>

            <label>Forks
              <input id="ag-sch-forks" type="number" min="1" value="1" />
            </label>
          </div>

          <div class="rule"></div>

          <div class="grid grid-3 compact">
            <label class="check"><input type="checkbox" id="ag-notify-success"> Notify on success</label>
            <label class="check"><input type="checkbox" id="ag-notify-fail" checked> Notify on fail</label>
            <label class="check"><input type="checkbox" id="ag-notify-change" checked> Only on state change</label>
          </div>

          <div class="form-grid">
            <label>Cooldown (min)
              <input id="ag-notify-cooldown" type="number" min="0" value="30" />
            </label>
            <label>Quiet Hours
              <input id="ag-notify-quiet" placeholder="22:00-06:00" />
            </label>
            <label>Target Key
              <input id="ag-notify-key" placeholder="uptime" />
            </label>
          </div>

          <div class="controls end">
            <button id="ag-add" class="btn primary">Save Schedule</button>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Schedules</h3>
          </div>
          <table class="table">
            <thead>
              <tr><th>ID</th><th>Playbook</th><th>Servers</th><th>Every</th><th></th></tr>
            </thead>
            <tbody id="ag-table"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- ============== AEGIS: RUNS ============== -->
    <section id="aeg-runs" class="tab">
      <div class="card">
        <div class="card-header">
          <h3>Recent Runs</h3>
          <div class="right controls">
            <button id="ag-refresh" class="btn">Refresh</button>
          </div>
        </div>
        <table class="table">
          <thead>
            <tr>
              <th>Time</th><th>Playbook</th><th>Status</th>
              <th>OK</th><th>Changed</th><th>Failed</th><th>Unreachable</th>
            </tr>
          </thead>
          <tbody id="ag-runs"></tbody>
        </table>
      </div>
    </section>

    <!-- ============== PLAYBOOK EDITOR ============== -->
    <section id="pb-editor" class="tab">
      <div class="card">
        <div class="card-header">
          <h3>Playbook Editor</h3>
          <div class="right controls wrap">
            <select id="pbSelect" title="Select existing playbook"></select>
            <button class="btn" id="btnPbNew">New</button>
            <button class="btn" id="btnPbDuplicate">Duplicate</button>
            <button class="btn" id="btnPbDownload">Download</button>
            <button class="btn primary" id="btnPbSave">Save</button>
          </div>
        </div>

        <div class="form-grid">
          <label>Filename
            <input id="pbName" placeholder="check_services.yml" />
          </label>
        </div>

        <label>Content
          <textarea id="pbEditor" class="codearea" spellcheck="false" placeholder="---
- name: Example
  hosts: all
  gather_facts: false
  tasks:
    - debug: { msg: 'hello' }"></textarea>
        </label>
        <p class="muted">Files are read/written under <code>/share/jarvis_prime/aegisops/playbooks</code>.</p>
      </div>
    </section>

  </main>

  <div id="toast" class="toast-stack"></div>
  <script src="app.js"></script>
</body>
</html>
