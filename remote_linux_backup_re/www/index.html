<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<title>Remote Linux Backup</title>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="stylesheet" href="style.css"/>
</head>
<body>
<div class="page">
  <div class="card">
    <div class="card__header">
      <div class="brand__logo"></div>
      <div>
        <h1 class="brand__title">Remote Linux Backup</h1>
        <p class="brand__subtitle">Simple backups & mounts</p>
      </div>
    </div>

    <div class="tabs">
      <button class="tab is-active" data-target="backup">Backup</button>
      <button class="tab" data-target="restore">Restore</button>
      <button class="tab" data-target="mounts">Mounts</button>
      <button class="tab" data-target="backups">Backups</button>
      <button class="tab" data-target="settings">Settings</button>
      <button class="tab" data-target="help">Help</button>
    </div>

    <!-- Backup -->
    <section class="panel is-active" id="panel-backup">
      <form class="form">
        <div class="field"><label>Host/IP<input id="b_host" placeholder="10.0.0.10"/></label></div>
        <div class="field"><label>User<input id="b_user" value="root"/></label></div>
        <div class="field"><label>Port<input id="b_port" value="22"/></label></div>
        <div class="field"><label>Password<input id="b_pass" type="password"/></label></div>
        <div class="field"><label>Method
          <select id="b_method">
            <option value="dd">Full Disk (dd)</option>
            <option value="rsync">Files (rsync)</option>
            <option value="zfs">ZFS snapshot</option>
          </select></label>
        </div>
        <div class="field"><label>Disk device (dd)<input id="b_disk" value="/dev/sda"/></label></div>
        <div class="field"><label>Store to<input id="b_store" value="/backup"/></label></div>
        <div class="field"><label>Verify (dd)
          <select id="b_verify"><option value="false">No</option><option value="true">Yes</option></select>
        </label></div>
        <div class="field"><label>Backup name<label><input id="b_name" placeholder="OPNsense-01"/></label></label></div>
      </form>
      <div class="actions">
        <button class="btn" id="btn_estimate">Estimate</button>
        <button class="btn btn--primary" id="btn_run_backup">Run Backup</button>
      </div>
      <div class="log-wrap"><div class="log-title">Status / Output</div><pre class="log" id="status_box"></pre></div>
    </section>

    <!-- Restore -->
    <section class="panel" id="panel-restore">
      <form class="form">
        <div class="field"><label>Host/IP<input id="r_host" placeholder="10.0.0.10"/></label></div>
        <div class="field"><label>User<input id="r_user" value="root"/></label></div>
        <div class="field"><label>Port<input id="r_port" value="22"/></label></div>
        <div class="field"><label>Password<input id="r_pass" type="password"/></label></div>
        <div class="field"><label>Method
          <select id="r_method"><option value="dd">Full Disk (dd)</option><option value="rsync">Files (rsync)</option></select>
        </label></div>
        <div class="field"><label>Disk device (dd)<input id="r_disk" value="/dev/sda"/></label></div>
        <div class="field"><label>Image path (dd)<input id="r_image" placeholder="/backup/..." /></label></div>
      </form>
      <div class="actions">
        <button class="btn btn--danger" id="btn_run_restore">Restore (double confirm)</button>
      </div>
      <div class="log-wrap"><div class="log-title">Status / Output</div><pre class="log" id="restore_box"></pre></div>
    </section>

    <!-- Mounts -->
    <section class="panel" id="panel-mounts">
      <form class="form">
        <div class="field"><label>Preset name<input id="m_name" placeholder="NAS-Backups"/></label></div>
        <div class="field"><label>Protocol
          <select id="m_proto"><option value="cifs">SMB/CIFS</option><option value="nfs">NFS</option></select>
        </label></div>
        <div class="field"><label>Server / host<input id="m_server" placeholder="10.0.0.21"/></label></div>
        <div class="field"><label>Username (SMB)<input id="m_user" /></label></div>
        <div class="field"><label>Password (SMB)<input id="m_pass" type="password"/></label></div>
        <div class="field"><label>Share / Export<input id="m_share" placeholder="Backups  OR  /export/backups"/></label></div>
        <div class="field"><label>Share / export results
          <select id="m_share_select"></select>
        </label></div>
        <div class="field"><label>Mount point<input id="m_mount" value="/mnt/Backups"/></label></div>
        <div class="field"><label>Extra options<input id="m_opts" placeholder="iocharset=utf8,uid=0,gid=0"/></label></div>
        <div class="field"><label>Auto-mount on start
          <select id="m_auto"><option value="false">No</option><option value="true">Yes</option></select>
        </label></div>
      </form>
      <div class="actions">
        <button class="btn" id="btn_list_shares">List shares/exports</button>
        <button class="btn" id="btn_use_selected">Use selected</button>
        <button class="btn" id="btn_mount_selected">Mount selected</button>
        <button class="btn" id="btn_add_mount">Add / Update</button>
      </div>

      <h3 style="margin-top:12px">Mount presets</h3>
      <div class="details">
        <table style="width:100%;border-collapse:collapse">
          <thead><tr><th>Name</th><th>Proto</th><th>Server</th><th>Share/Export</th><th>Mount</th><th>Auto</th><th>Status</th><th>Actions</th></tr></thead>
          <tbody id="mount_rows"></tbody>
        </table>
      </div>
    </section>

    <!-- Backups list -->
    <section class="panel" id="panel-backups">
      <div class="details">
        <table style="width:100%;border-collapse:collapse">
          <thead>
            <tr><th>Path</th><th>Type</th><th>Location</th><th>Size</th><th>Date</th><th>Actions</th></tr>
          </thead>
          <tbody id="backups_rows"></tbody>
        </table>
      </div>
    </section>

    <!-- Settings -->
    <section class="panel" id="panel-settings">
      <form class="form">
        <div class="field"><label>Gotify URL<input id="s_gotify_url" placeholder="https://gotify.example"/></label></div>
        <div class="field"><label>Gotify token<input id="s_gotify_token"/></label></div>
        <div class="field"><label>Enable Gotify
          <select id="s_gotify_enabled"><option value="false">No</option><option value="true">Yes</option></select>
        </label></div>
        <div class="field"><label>Dropbox enabled
          <select id="s_dropbox_enabled"><option value="false">No</option><option value="true">Yes</option></select>
        </label></div>
        <div class="field"><label>Dropbox remote<input id="s_dropbox_remote" value="dropbox:HA-Backups"/></label></div>
        <div class="field"><label>UI Port<input id="s_ui_port" value="8066"/></label></div>
      </form>
      <div class="actions">
        <button class="btn" id="btn_save_settings">Save Settings</button>
        <button class="btn" id="btn_test_gotify">Test Gotify</button>
      </div>
      <div class="log-wrap"><div class="log-title">Status</div><pre class="log" id="s_status"></pre></div>
    </section>

    <!-- Help -->
    <section class="panel" id="panel-help">
      <p class="hint">Alpha software. Use at your own risk. Restores can destroy data. Always have verified backups.</p>
    </section>
  </div>
</div>

<script src="app.js"></script>
</body>
</html>
